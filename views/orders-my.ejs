<%- include('partials/header', { title: title || "ƒê∆°n h√†ng c·ªßa t√¥i" }) %>

<section class="container" style="margin-top:2rem; max-width:900px;">
  <h2 style="margin-bottom:1rem;">üßæ ƒê∆°n h√†ng c·ªßa t√¥i</h2>

  <% if (!orders || orders.length === 0) { %>
    <p>B·∫°n ch∆∞a c√≥ ƒë∆°n h√†ng n√†o üå±</p>
    <p><a href="/" class="btn-primary" style="text-decoration:none;">Ti·∫øp t·ª•c mua c√¢y</a></p>
  <% } else { %>
    <table class="order-table" style="width:100%; border-collapse:collapse;">
      <thead>
        <tr style="text-align:left; background:#f4faf4;">
          <th style="padding:.5rem; border-bottom:1px solid #dfe8d8;">M√£ ƒë∆°n</th>
          <th style="padding:.5rem; border-bottom:1px solid #dfe8d8;">Ng√†y ƒë·∫∑t</th>
          <th style="padding:.5rem; border-bottom:1px solid #dfe8d8;">S·∫£n ph·∫©m</th>
          <th style="padding:.5rem; border-bottom:1px solid #dfe8d8;">T·ªïng ti·ªÅn</th>
          <th style="padding:.5rem; border-bottom:1px solid #dfe8d8;">Tr·∫°ng th√°i</th>
        </tr>
      </thead>
      <tbody>
        <% orders.forEach(o => { %>
          <tr style="border-bottom:1px solid #eee;">
            <td style="padding:.5rem; font-size:0.9rem; color:#555;">
              <%= o._id %>
            </td>

            <td style="padding:.5rem; font-size:0.9rem;">
              <%= o.createdAt.toLocaleString('vi-VN') %>
            </td>

            <td style="padding:.5rem; font-size:0.9rem; line-height:1.4;">
              <% o.items.forEach(it => { %>
                <div>
                  <strong><%= it.name %></strong> √ó <%= it.qty %>
                  (<%= formatCurrency(it.price) %> m·ªói c√¢y)
                </div>
              <% }) %>
            </td>

            <td style="padding:.5rem; font-weight:600; color:#2f4f2f;">
              <%= formatCurrency(o.total) %>
            </td>

            <td style="padding:.5rem;">
              <% if (o.status === 'pending') { %>
                <span class="badge" style="background:#fff3cd; color:#856404; padding:2px 6px; border-radius:4px; font-size:0.8rem;">
                  Ch·ªù x·ª≠ l√Ω
                </span>
              <% } else if (o.status === 'preparing') { %>
                <span class="badge" style="background:#cfe2ff; color:#084298; padding:2px 6px; border-radius:4px; font-size:0.8rem;">
                  ƒêang chu·∫©n b·ªã
                </span>
              <% } else if (o.status === 'shipping') { %>
                <span class="badge" style="background:#d1e7dd; color:#0f5132; padding:2px 6px; border-radius:4px; font-size:0.8rem;">
                  ƒêang giao
                </span>
              <% } else if (o.status === 'done') { %>
                <span class="badge" style="background:#e2ffe2; color:#155724; padding:2px 6px; border-radius:4px; font-size:0.8rem;">
                  Ho√†n t·∫•t
                </span>
              <% } else if (o.status === 'canceled') { %>
                <span class="badge" style="background:#f8d7da; color:#721c24; padding:2px 6px; border-radius:4px; font-size:0.8rem;">
                  ƒê√£ h·ªßy
                </span>
              <% } %>
            </td>
          </tr>
        <% }) %>
      </tbody>
    </table>
  <% } %>
</section>

<%- include('partials/footer') %>
